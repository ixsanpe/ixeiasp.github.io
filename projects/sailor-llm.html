<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sailor: Automated ML Training System - Ixeia Sánchez Périz</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23ffffff'/><path d='M20 85 L30 70 Q35 65 40 68 L45 72 Q50 75 55 70 L60 62 Q65 55 70 60 L78 68 Q82 72 85 68 L85 85 Z' fill='%2395c9c9' stroke='%232d3748' stroke-width='2'/><path d='M25 75 L32 65 Q37 58 42 62 L50 70 Q55 74 60 68 L68 58 Q72 53 77 58 L82 65 L82 85 L25 85 Z' fill='%23b8a8d8' opacity='0.7' stroke='%232d3748' stroke-width='2'/><path d='M35 50 L45 30 L50 35 L55 28 L65 45 L70 38 L80 55' fill='none' stroke='%237b9ab8' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/><ellipse cx='18' cy='25' rx='8' ry='5' fill='%23e8a89a' opacity='0.8'/><ellipse cx='25' cy='18' rx='7' ry='4' fill='%23e8a89a' opacity='0.6'/></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #7b9ab8;
            --secondary-color: #5d7a99;
            --accent-color: #9ab5ce;
            --text-dark: #2d3748;
            --text-light: #4a5568;
            --bg-light: #f0f4f8;
            --bg-white: #ffffff;
            --border-color: #cbd5e0;
        }

        [data-theme="dark"] {
            --primary-color: #6b8fb0;
            --secondary-color: #7a9fc0;
            --accent-color: #b8a8d8;
            --text-dark: #e2e8f0;
            --text-light: #cbd5e0;
            --bg-light: #1a202c;
            --bg-white: #2d3748;
            --border-color: #4a5568;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-white);
        }

        nav {
            background-color: var(--bg-white);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        nav .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        nav .back-link {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        nav .back-link:hover {
            color: var(--primary-color);
        }

        .dark-mode-toggle {
            background: none;
            border: none;
            color: var(--text-dark);
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: background-color 0.3s, transform 0.2s;
        }

        .dark-mode-toggle:hover {
            background-color: var(--bg-light);
            transform: scale(1.1);
        }

        .dark-mode-toggle svg {
            width: 20px;
            height: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 6rem 2rem 4rem;
        }

        .project-header {
            margin-bottom: 3rem;
        }

        .post-date {
            color: var(--text-light);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
        }

        .tech-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1.5rem 0;
        }

        .tech-tag {
            padding: 0.4rem 1rem;
            background-color: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 0.875rem;
            color: var(--text-dark);
            font-weight: 500;
        }

        .project-content {
            color: var(--text-light);
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .project-content p {
            margin-bottom: 1.5rem;
        }

        .project-content h2 {
            font-size: 1.75rem;
            margin: 2.5rem 0 1rem;
            color: var(--text-dark);
        }

        .project-content h3 {
            font-size: 1.35rem;
            margin: 2rem 0 1rem;
            color: var(--text-dark);
        }

        .project-content ul {
            margin: 1.5rem 0 1.5rem 2rem;
            list-style: none;
        }

        .project-content ul li {
            margin-bottom: 1rem;
            position: relative;
            padding-left: 1.5rem;
        }

        .project-content ul li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .project-content strong {
            color: var(--text-dark);
        }

        .highlight-box {
            margin: 2rem 0;
            padding: 1.5rem;
            background-color: var(--bg-light);
            border-left: 4px solid var(--primary-color);
            border-radius: 8px;
        }

        .highlight-box h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .project-content a {
            color: #8b7aa8;
            text-decoration: none;
            font-weight: 500;
        }

        .project-content a:hover {
            text-decoration: underline;
            color: #7a6997;
        }

        [data-theme="dark"] .project-content a {
            color: #e0d4f7;
        }

        [data-theme="dark"] .project-content a:hover {
            color: #f0e8ff;
        }

        footer {
            background-color: #2d3748;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 4rem;
        }

        [data-theme="dark"] footer {
            background-color: #1a202c;
        }

        footer a {
            color: #9b8bb8;
            text-decoration: none;
        }

        [data-theme="dark"] footer a {
            color: #c9b8e8;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .carousel-container {
            position: relative;
            max-width: 100%;
            margin: 2rem auto;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .carousel-slide {
            display: none;
            animation: fadeIn 0.5s;
            min-height: 500px;
        }

        .carousel-slide.active {
            display: flex;
            flex-direction: column;
        }

        .carousel-slide img {
            width: 100%;
            height: 500px;
            object-fit: contain;
            object-position: center;
            background-color: var(--bg-white);
            display: block;
        }

        .carousel-caption {
            text-align: center;
            padding: 1rem;
            background-color: var(--bg-light);
            font-size: 0.875rem;
            color: var(--text-light);
            font-style: italic;
        }

        .carousel-indicators {
            text-align: center;
            padding: 0.5rem;
            background-color: var(--bg-light);
        }

        .carousel-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--border-color);
            margin: 0 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .carousel-dot.active {
            background-color: var(--primary-color);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .project-content {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <a href="../index.html" class="logo">Ixeia Sánchez Périz</a>
            <div style="display: flex; align-items: center; gap: 2rem;">
                <a href="../index.html#work" class="back-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Home
                </a>
                <button id="darkModeToggle" class="dark-mode-toggle" aria-label="Toggle dark mode">
                    <svg class="sun-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="4" fill="currentColor"/>
                        <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41" fill="none"/>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="project-header">
            <div class="post-date">ETH Zürich Master's Thesis • 2024</div>
            <h1>Sailor: Automated ML Training System for the Cloud</h1>
            <div class="tech-tags">
                <span class="tech-tag">PyTorch</span>
                <span class="tech-tag">DeepSpeed</span>
                <span class="tech-tag">GKE</span>
                <span class="tech-tag">Docker</span>
            </div>
        </div>

        <div class="project-content">
            <h2>The Challenge</h2>
            <p>
                Training large-scale LLMs in the cloud is expensive and complex. Loads of systems struggle with slow fault tolerance mechanisms. It is difficult to find optimal resource configurations, and adapt to node failures, especially when using cheaper preemptible instances.
            </p>

            <h2>Solution: Sailor System</h2>
            <p>
                Sailor introduces a comprehensive system for automating ML training in the cloud with two main innovations: elastic fault-tolerant mechanisms and an optimal resource planner.
            </p>

            <div style="display: flex; gap: 1rem; margin: 2rem 0; flex-wrap: wrap; justify-content: center;">
                <div style="flex: 1; min-width: 300px; max-width: 500px;">
                    <img src="../assets/sailor-sys1.jpg" alt="Sailor System Architecture - Multi-cluster coordination" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                    <p style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.5rem; text-align: center; font-style: italic;">Multi-cluster coordination with master controller</p>
                </div>
            </div>

            <h3>1. Elastic Fault-Tolerant Mechanism</h3>
            <p>
                We developed a novel in-CPU checkpointing mechanism that enables fast recovery from failures and preemptions. Unlike traditional approaches that write checkpoints to disk or remote storage, our method:
            </p>
            <ul>
                <li>Stores checkpoints directly in CPU memory for instant access</li>
                <li>Enables rapid reconfiguration when nodes are preempted or fail</li>
                <li>Minimizes training interruption through elastic scaling</li>
                <li>Adapts dynamically to changing resource availability</li>
            </ul>

            <div class="carousel-container">
                <div class="carousel-slide active">
                    <img src="../assets/sailor-elastic1.jpg" alt="Preemption detected">
                    <div class="carousel-caption">Spot instance preemption detected (World size = 4 → 3)</div>
                </div>
                <div class="carousel-slide">
                    <img src="../assets/sailor-elastic2.jpg" alt="Step 1: Error caught">
                    <div class="carousel-caption">Step 1: Controller catches error and kills all processes</div>
                </div>
                    <div class="carousel-slide">
                    <img src="../assets/sailor-elastic3.jpg" alt="Step 5: New config requested">
                    <div class="carousel-caption">Step 2: New configuration is shared to all nodes</div>
                </div>
                <div class="carousel-slide">
                    <img src="../assets/sailor-elastic4.jpg" alt="Step 3: Checkpoint recovery">
                    <div class="carousel-caption">Step 3: Recover from in-CPU checkpoint with new split</div>
                </div>
                <div class="carousel-slide">
                    <img src="../assets/sailor-elastic5.jpg" alt="Step 4: Cleanup">
                    <div class="carousel-caption">Step 4: Cleanup obsolete resources</div>
                </div>
                <div class="carousel-slide">
                    <img src="../assets/sailor-elastic6.jpg" alt="Step 5: Training resumes">
                    <div class="carousel-caption">Step 5: Training resumes with new world size</div>
                </div>
                <div class="carousel-indicators">
                    <span class="carousel-dot active" onclick="currentSlide(0)"></span>
                    <span class="carousel-dot" onclick="currentSlide(1)"></span>
                    <span class="carousel-dot" onclick="currentSlide(2)"></span>
                    <span class="carousel-dot" onclick="currentSlide(3)"></span>
                    <span class="carousel-dot" onclick="currentSlide(4)"></span>
                    <span class="carousel-dot" onclick="currentSlide(5)"></span>
                </div>
            </div>

            <h3>2. Optimal Resource Planner</h3>
            <p>
                Our optimization algorithm intelligently navigates the cloud resource search space to find the most cost-effective training configurations.
            </p>
            <h2>Results & Impact</h2>
            <p>
                Our evaluation demonstrates significant improvements over existing approaches:
            </p>
            <ul>
                <li><strong>2.87x higher goodput</strong> on preemptible VMs compared to state-of-the-art fault tolerance methods</li>
                <li><strong>100× faster optimization</strong> for finding optimal training configurations</li>
                <li><strong>Cost-efficient training</strong> of 1.5B+ parameter models using cheaper preemptible instances</li>
                <li><strong>Minimal recovery overhead</strong> thanks to in-CPU checkpointing</li>
            </ul>

            <div class="highlight-box">
                <h3>Real-World Impact</h3>
                <p>
                    Sailor enables researchers and organizations to train large language models at a fraction of the cost, making advanced ML capabilities more accessible. By efficiently leveraging preemptible VMs, which can be 60-90% cheaper than on-demand instances, the system democratizes access to large-scale ML training.
                </p>
            </div>

            <h2>Open Source</h2>
            <p>
                This work has been continued and expanded by the Efficient Architectures and Systems Lab at ETH Zürich. The project is now open source and available on GitHub:
            </p>
            <p style="text-align: center; margin: 2rem 0;">
                <a href="https://github.com/eth-easl/sailor" target="_blank" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.3s, box-shadow 0.3s;">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    View on GitHub
                </a>
            </p>
        </div>
    </div>

    <footer>
        <p>&copy; <span id="currentYear"></span> Ixeia Sánchez Périz. All rights reserved.</p>
        <p><a href="../index.html">← Back to Portfolio</a></p>
    </footer>

    <script>
        // Set current year
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Dark mode toggle functionality
        const darkModeToggle = document.getElementById('darkModeToggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        const html = document.documentElement;

        // Check for saved theme preference or default to light mode
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateIcons(currentTheme);

        darkModeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateIcons(newTheme);
        });

        function updateIcons(theme) {
            if (theme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        }

        // Carousel functionality
        let currentSlideIndex = 0;
        let carouselInterval;

        function showSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');
            
            if (index >= slides.length) {
                currentSlideIndex = 0;
            } else if (index < 0) {
                currentSlideIndex = slides.length - 1;
            } else {
                currentSlideIndex = index;
            }
            
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            slides[currentSlideIndex].classList.add('active');
            dots[currentSlideIndex].classList.add('active');
        }

        function nextSlide() {
            showSlide(currentSlideIndex + 1);
        }

        function currentSlide(index) {
            showSlide(index);
            // Reset the interval when user manually selects a slide
            clearInterval(carouselInterval);
            carouselInterval = setInterval(nextSlide, 4000);
        }

        // Auto-advance carousel every 3 seconds
        carouselInterval = setInterval(nextSlide, 4000);
        // Pause carousel on hover
        const carouselContainer = document.querySelector('.carousel-container');
        if (carouselContainer) {
            carouselContainer.addEventListener('mouseenter', () => {
                clearInterval(carouselInterval);
            });
            
            carouselContainer.addEventListener('mouseleave', () => {
                carouselInterval = setInterval(nextSlide, 4000);
            });
        }
    </script>
</body>
</html>
